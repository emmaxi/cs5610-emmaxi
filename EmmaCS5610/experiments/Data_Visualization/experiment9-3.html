<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
<head>

    <title>experiment9-3</title>
    <script type="text/javascript" src="js/jquery-1.11.2.js"></script>
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.2.0/css/bootstrap.min.css">
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.2.0/css/bootstrap-theme.min.css">
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.2.0/js/bootstrap.min.js"></script>
    <script src="http://ajax.googleapis.com/ajax/libs/angularjs/1.2.15/angular.min.js"></script>

    
    <!-- D3.Js Import -->
    <script src="http://d3js.org/d3.v3.min.js"></script>

    <!-- self defined files import-->
    <link rel="stylesheet" type="text/css" href="css/exp9-3.css" />

</head>
<body class="container">
<h1>How to create chorographic maps using D3.js?</h1>

<div class = "container well">

    <svg id="grapharea" width="960" height="500"
      viewBox="0 0 960 600"
      preserveAspectRatio="xMidYMid">
    </svg>

    
<script src="http://d3js.org/queue.v1.min.js"></script>
<script src="http://d3js.org/topojson.v1.min.js"></script>
<script src="js/exp9-3.js" type="text/javascript"></script>

    </div>
    <p>
      USA unemployment (ranging from 0 to 15%) is represented on a this map in a more user-friendly manner.
      D3.Js provides a ton of Mapping functions in its API, which could be leveraged to achieve a highly advanced level of interactivity.
    </p>
    <p>The same as other experiments, we need to import the supporting files at the very beginning.</p>
    <pre>
        &lt;script type=&quot;text/javascript&quot; src=&quot;js/jquery-1.11.2.js&quot;&gt;&lt;/script&gt;
    &lt;link rel=&quot;stylesheet&quot; href=&quot;https://maxcdn.bootstrapcdn.com/bootstrap/3.2.0/css/bootstrap.min.css&quot;&gt;
    &lt;link rel=&quot;stylesheet&quot; href=&quot;https://maxcdn.bootstrapcdn.com/bootstrap/3.2.0/css/bootstrap-theme.min.css&quot;&gt;
    &lt;script src=&quot;https://maxcdn.bootstrapcdn.com/bootstrap/3.2.0/js/bootstrap.min.js&quot;&gt;&lt;/script&gt;
    &lt;script src=&quot;http://ajax.googleapis.com/ajax/libs/angularjs/1.2.15/angular.min.js&quot;&gt;&lt;/script&gt;
    </pre>
    <p>And then ,create the data files. If the reader want to see them in details,please look up the Refference at the bottom.</p>
    <p>So, How does we deal with these data? And the other importent tag is "svg".
    </p>
    <pre>
      var width = 960,
    height = 600;

var rateById = d3.map();

var quantize = d3.scale.quantize()
    .domain([0, .15])
    .range(d3.range(9).map(function (i) { return "q" + i + "-9"; }));

var projection = d3.geo.albersUsa()
    .scale(1280)
    .translate([width / 2, height / 2]);

var path = d3.geo.path()
    .projection(projection);

var svg = d3.select("#grapharea").append("svg")
    .attr("width", width)
    .attr("height", height);

queue()
    .defer(d3.json, "us_counties.txt")
    .defer(d3.tsv, "unemployment.tsv", function (d) { rateById.set(d.id, +d.rate); })
    .await(ready);

function ready(error, us) {
    svg.append("g")
      .attr("class", "counties")
    .selectAll("path")
      .data(topojson.feature(us, us.objects.counties).features)
    .enter().append("path")
      .attr("class", function (d) { return quantize(rateById.get(d.id)); })
      .attr("d", path);

    svg.append("path")
      .datum(topojson.mesh(us, us.objects.states, function (a, b) { return a !== b; }))
      .attr("class", "states")
      .attr("d", path);
}

d3.select(self.frameElement).style("height", height + "px");
    </pre>

    <hr/>
  <h2>relative code</h2>
   <a href="../../fileview/Default.aspx?~/experiments/Data_Visualization/Experiment9-3.html" target="_blank">Experiment9-3 Html Source</a><br />
   <p >The Graph shown above is constructed from a JSON file that can be found <a href="us_counties.txt">HERE</a>.<br/>
   <p>The shown USA Unemployment data information is contructed from a file that can be found <a href="unemployment.tsv">HERE</a>.</p>
  <h3>References:</h3>
    <a href="http://d3js.org/" target="_blank">D3.js website</a><br />
 <footer>Copyright by Xi Wang</footer>


</body>

</html>
